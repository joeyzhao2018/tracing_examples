
## Tools needed
- [serverless framework tool](https://www.serverless.com/) installed
- AWS account
- Datadog account and API key

## Deploy
`cd src/sns-otel-1`
Run
`./build.sh`
Then
`DATADOG_API_KEY={} serverless deploy`

## How the project was set up
This project was generated by running
`dotnet tool install -g Amazon.Lambda.Tools --framework net6.0`
`dotnet new lambda.SNS  --name sns-otel-1`
Then
`cd sns-otel-1/src/sns-otel-1 && serverless create --template aws-csharp --name sns-otel-1` to setup some scaffolding
Then remove Handler.cs and aws-csharp.csproj as we'll use the one created above instead.
Then run `serverless plugin install --name serverless-plugin-datadog` to install tools to auto-instrument the lambda.
And update the serverless.yml accordingly.

## Add OTEL API calls
Follow
https://opentelemetry.io/docs/instrumentation/net/manual/
And ran
`dotnet add package OpenTelemetry`
`dotnet add package OpenTelemetry.Exporter.Console`


Update code following
[This example](https://github.com/DataDog/dd-trace-dotnet/tree/20ed715afca0bb0e1a3d4a4ac1224e1b85b02c1d/tracer/test/test-applications/integrations/Samples.OpenTelemetrySdk)


