
## Tools needed
- [serverless framework tool](https://www.serverless.com/) installed
- AWS account
- Datadog account and API key

## Deploy
`cd hello`
`GOOS=linux GOARCH=amd64 go build -tags lambda.norpc -o bin/hello main.go`
Note: the golang mod is in hello directory.
`cd ..`
Then
`DATADOG_API_KEY={} serverless deploy`

## How the project was set up
This project was generated by running
`serverless create --template aws-go --name sns-otel-1` to setup some scaffolding for serverless framework.

Then run `serverless plugin install --name serverless-plugin-datadog` to install tools to auto-instrument the lambda.


Then to keep each go mod separated.
first `cd hello`
then `go mod init hello`
`go get github.com/aws/aws-lambda-go/lambda`
`go get github.com/aws/aws-lambda-go/events`
`go get github.com/DataDog/datadog-lambda-go`

And update the serverless.yml accordingly.

## Add OTEL API calls

Follow
https://opentelemetry.io/docs/instrumentation/go/manual/
And ran
`go get go.opentelemetry.io/otel \
  go.opentelemetry.io/otel/trace \
  go.opentelemetry.io/otel/sdk ` in hello dir


Update code following
[This guide](https://docs.datadoghq.com/tracing/trace_collection/custom_instrumentation/otel_instrumentation/go/)

